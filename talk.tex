\documentclass{beamer}
\usepackage{listings}
\usepackage{inconsolata}
\usepackage[T1]{fontenc}
\usepackage[scaled]{helvet}
\renewcommand*\familydefault{\sfdefault}

\lstset{
  basicstyle=\ttfamily
}

\begin{document}

\begin{frame}{Test}
  \begin{center}
    \lstinputlisting[language=Python]{./importing.py}
  \end{center}
\end{frame}

\section{Introduction}

\subsection{Definitions}
\label{sec:definitions}

\begin{frame}
  \frametitle{What's this about}
  \begin{itemize}
  \item Understanding OpenStreetMap data
  \item Learning how to use PostgreSQL for storing and processing data
  \item How to create map services with combination of OSM data and PostgreSQL
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{OpenStreetMap}
  \begin{itemize}
  \item Crowd-sourced maps
  \item Free license (CC-by-SA -> ODBL)
  \item Good data coverage for Europe (most)
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Why OSM}
  \begin{itemize}
  \item Easy
  \item Free
  \item Data quality
  \end{itemize}
\end{frame}

\subsection{Data layout}
\label{sec:diving}


\begin{frame}
  \frametitle{How data looks}
  \begin{itemize}
  \item General layout
  \item Nodes
  \item Ways
  \item Relation
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Nodes: image}
\end{frame}

\begin{frame}
  \frametitle{Nodes: XML}
\end{frame}

\begin{frame}
  \frametitle{Nodes: Python}
\end{frame}


\begin{frame}
  \frametitle{Ways: image}
\end{frame}

\begin{frame}
  \frametitle{Ways: XML}
\end{frame}

\begin{frame}
  \frametitle{Ways: Python}
\end{frame}


\begin{frame}
  \frametitle{Importing data}
  \begin{itemize}
  \item How to handle nodes
  \item ... ways
  \item relations
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Initial sketch}
  \begin{itemize}
  \item Show simple SAX
  \item nodes, tags, osm root tag
  \item shapely
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Adding ways}
  \begin{itemize}
  \item ways, nds
  \item different tags
  \item polygons (maybe another frame?)
  \end{itemize}
\end{frame}


\begin{frame}
  \frametitle{Relations}
  \begin{itemize}
  \item
  \end{itemize}
\end{frame}

\section{Importing}

Other options: Osmosis, osm2pgsql,

\section{Rendering}

\begin{frame}
  \frametitle{Principles}
  \begin{itemize}
  \item Layers
  \item Tiles
  \item Polygons, points, layers
  \item Bounding box % TODO: move to general section
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Layers}
  basis of cartography
  use for drawing different kind of information

\end{frame}

\begin{frame}
  \frametitle{Datasources}
  raster, vector
\end{frame}

\begin{frame}
  \frametitle{Doing the rendering}
  cairo,aggdraw
  layer by layer
\end{frame}

\begin{frame}
  mapnik, xml styling?
\end{frame}

\begin{frame}
  using indexes in postgis
\end{frame}

\begin{frame}

\end{frame}

\section{Searching}

\begin{frame}
  \frametitle{What's that?}
  fucking geocoding how does it work
  search for places
  search for names of geographic points
  fuzzy search vs structured search
  reverse geocoding
\end{frame}

\begin{frame}
  \frametitle{Why is it hard?}
  fuzzy search
  different order
  incomplete information
  double information
\end{frame}

\begin{frame}
  \frametitle{Solutions}
  trigrams
  levenshtein distance
\end{frame}

\begin{frame}
  levenshtein distance and why it doesn't help
\end{frame}

\begin{frame}
  \frametitle{Terms}
  edit (levenshtein) distance
  fuzzy search
\end{frame}



http://norvig.com/spell-correct.html




% GIN, GIS, n-grams, levenshtein distance

%% Existing solutions
%% Structured search
%% Fuzzy search
%% Levenstein distance
%% Adding
%% Trigrams
%% PostgreSQL full-text search
%% Why not Soundex/Metaphone/Double metaphone


\section{Routing}

\begin{frame}
  \frametitle{PostgreSQL and PostGIS}

\end{frame}

\begin{frame}
  smart solution with r-trees for storing data
  intersection of ways
\end{frame}

\begin{frame}
  dijkstra, astar, empirical solution
\end{frame}

%% Intro

%% What's OSM
%% License
%% Data quality ?

%% Import

%% How data looks
%% How to use lxml or protobuf for parsing
%% Choosing data storage -- PostGIS, not MySQL or MongoDB or ...
%% General import layout

%% Some benchmarks
%% Some code
%% Some funny images

%% Tiles

%% Rendering
%% Mapnik, etc
%% How to write your renderer
%% Scale the motherfucker

%% Geocoding

%% Routing

%% Building graphs
%% Why importing is harder for routing
%% Pygraph, networkx, igraph



\end{document}
